<%@page contentType="text/html;charset=UTF-8" language="java" import="java.sql.*"%>
<%@include file="back/config.html" %>
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/member.css">
        <link rel="stylesheet" href="css/h.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> 
        <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@300;400;500;600;700&display=swap" rel="stylesheet"> <!--英文字體-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <title>映像販賣所</title>
   </head>
<body>
 <!-- 導覽列 -->
 <%
							//判斷是否登入
							if(session.getAttribute("id") == null ){
								request.setCharacterEncoding("UTF-8");
								out.println("<script type='text/javascript'>");
								out.println("alert('請先登錄/註冊呦 ♡');location.href='index.html?'; ");
								out.println("</script>");
							%>  
								
							<%
							}else{
							%>
        <div id="id_wrapper">
            <div id="id_header">
            <header>
                <nav>
                    <ul class="nav_center">
                        <li><a href="info.html">品牌理念</a></li>
                        <li><a href="about.html">關於我們</a></li>
                        <li><a href="index.html"><img class="logo" src="img/logo.png"></a></li>
                        <li>
                            <div class="dropdown">
                                <a href="shop.html">商品瀏覽</a>
                                <div class="dropdown-content">
                                    <a href="sort1.html">底片相機</a>
                                    <a href="sort3.html">拍立得</a>
                                    <a href="sort2.html">即可拍</a>
                                    <a href="sort4.html">底片</a>
                                </div>
                            </div>
                        </li>
                        <li><a href="member.html" class="nav_member">會員資訊</a></li>
						<div class="nav_right">
                    <form action="back/logout.html" method="post">
					<input type="submit" class="w3-bar-item w3-button" value="登出"></input>
					</form>            
                  
                    <!-- 購物車 -->
                    <div id="cart">
                        <button class="openbtn" onclick="openNav()"><img class="cart_logo" src="img/cart.png" ></button>
                    </div>
                    <div id="mySidebar" class="sidebar">
                        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                        <div class="sidebarinner">
                            <form action="checkout.html">
                                <div class="cart-p">
                                    <img src="img/c5.png">
                                    <div>
                                        <div class="cp1">   <!--商品名稱-->
                                            <h1>KONICA</h1>
                                            <p>Genba Kantoku</p>
                                        </div>
                                        <div class="cp2">   <!-- 數量增減 -->
                                            <input id="min" type="button" value="&minus;"/>
                                            <input id="quantity" type="text" value="1"/>
                                            <input id="add" type="button" value="+"/> <!-- ' &minus; '是減號 -->
                                        </div>
                                    </div>
                                    <div class="cp3">   <!-- 商品價格 -->
                                        <p>$4580</p>
                                    </div>
                                    <button>&times;</button>    <!-- 刪除商品按鈕 '&times;'是叉叉符號 -->
                                </div>
                                <div class="cart-p">
                                    <img src="img/c1.png">
                                    <div>
                                        <div class="cp1">   <!--商品名稱-->
                                            <h1>CANON</h1>
                                            <p>New Canonet 28</p>
                                        </div>
                                        <div class="cp2">   <!-- 數量增減 -->
                                            <input id="min" type="button" value="&minus;"/>
                                            <input id="quantity" type="text" value="1"/>
                                            <input id="add" type="button" value="+"/> <!-- ' &minus; '是減號 -->
                                        </div>
                                    </div>
                                    <div class="cp3">   <!-- 商品價格 -->
                                        <p>$4580</p>
                                    </div>
                                    <button>&times;</button>    <!-- 刪除商品按鈕 '&times;'是叉叉符號 -->
                                </div>
                                
                                <!-- 計算總價 -->
                                <div class="cart-total">
                                    <p>SUBTOTAL<p>
                                    <p class="r">$6000</p>
                                </div>
                                <div class="cart-but">
                                    <input type="button" value="BACK TO SHOP" onclick="location.href='shop.html'">
                                    <input type="submit" value="CHECKOUT" class="p-check">
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <form action="search.html">
                        <div class="search-box">
                            <input type="text" name="search" class="search-txt" placeholder="search..." name="search" required="required"/>
                            <button type="submit" class="search-btn">
                                <img src="img/search.png" >
                                <!-- <i class="fa fa-search"></i> -->
                            </button>
                        </div> 
                    </form>
                </div>

                        <!-- 登入註冊 -->
       
                    </ul>
                </nav>
            </header>
            </div>
            <script src="js/h.js"></script>
            <!-- 導覽列結束 -->
			
			<center>
			
            <div id="id_content">
                <section class="s1">
                    <div class="container2">
                        <div class="content">
                            <img src="img/ugly1.png" class="ugly1">
                            <img src="img/ugly2.png" class="ugly2">
                            <img src="" alt="">
                            <input type="radio" name="slider" checked id="modify">
                            <input type="radio" name="slider" id="record">
                        
                            <div class="list">
                                <label for="modify" class="modify">
                                <span class="title">個人資料</span>
                                </label>
                                <label for="record" class="record">
                                <span class="title">訂單記錄</span>
                                </label>
                                <div class="slider"></div>
                            </div>
                            <div class="text-content">
                                <div class="modify text">
								<%  
    
          try {
//Step 1: 載入資料庫驅動程式 
            Class.forName("com.mysql.jdbc.Driver");   
            try {
//Step 2: 建立連線 
           if(con.isClosed())
                    out.println("連線建立失敗");
                else
                    { 
//Step 3: 選擇資料庫 
                    con.createStatement().execute("USE `final`");
					request.setCharacterEncoding("UTF-8");
//Step 4: 執行 SQL 指令 
                    String sqll = "SELECT `name`,`gender`,`tel`,`email`,`add`,`account`,`password`FROM `member` WHERE `account`='" +session.getAttribute("id")+"';"; 
                    ResultSet all=  con.createStatement().executeQuery(sqll);
//Step 5: 顯示結果 
                          
        //一筆一筆讀取資料，如果回傳false,表示資料讀取完畢。
        //用回圈印出結果，getString(1)表示id,getString(2)表示name,依此類推
		            while(all.next()){
                        for(int i=1; i<2; i++){ 
%>
						
                                    <div class="rr">
                                        <div class="info">
                                            <p>個人資料</p>
                                            <form action="back/update.html">
                                                <div class="mod-txt">
                                                    <input type="text" name="name" placeholder="Name" value="<%=all.getString(1)%>" required="required"/>     <!--抓個人資料填入value內-->
                                                    <input type="text" name="gender" placeholder="Gender" value="<%=all.getString(2)%>" required="required"/>
                                                    <input type="text" name="tel" placeholder="Phone" value="<%=all.getString(3)%>" required="required"/>
                                                    <input type="text" name="email" placeholder="Email" value="<%=all.getString(4)%>" required="required"/>
                                                    <input type="text" name="add" placeholder="Address" value="<%=all.getString(5)%>" required="required"/>
                                                </div>
                                                <input type="submit" value="UPDATE" class="p-sub">
                                            </form>
                                        </div>
                                        <div class="acc">
                                            <p>帳號密碼</p>
                                            <form action="back/update1.html">
                                                <div class="mod-txt">
                                                    <input type="text" name="account" placeholder="Account" value="<%=all.getString(6)%>" required="required"/>    <!--抓個人資料填入value內-->
                                                    <input type="text" name="password" placeholder="Password" value="<%=all.getString(7)%>" required="required"/>
                                                </div>
                                                <input type="submit" value="UPDATE" class="p-sub">
                                            </form>
                                            <h2>*如需修改資料請直接填入輸入格*</h2>
                                        </div>
										<%
                        }
                        
      //每次印完一次資料，就印分隔線區隔。
                     } 
//Step 6: 關閉連線          
                    con.close();
                    }
                }  
            catch (SQLException sExec) {
                    out.println("SQL錯誤"+sExec.toString());
                }
              }
        
            catch (ClassNotFoundException err) {
                out.println("class錯誤"+err.toString());
            }
            
          %>
		  <%
							}
							%>
							
                                    </div>
									
                                </div>
								
                                <div class="record text">
                                    <table class="r-table">
                                        <tr>
                                            <th>訂單編號</th>
                                            <th>訂單日期</th>
                                            <th>品名</th>
                                            <th>數量</th>
                                            <th>合計</th>
                                            <th>備註</th>
                                            <th>訂單狀態</th>
                                        </tr>
                                        <tr>
                                            <td>A20200526</td>
                                            <td>2021/05/26</td>	
                                            <td><span>CANON<br>New Canonet 28</span></td>   <!--br前是抓品牌 br後是抓品名-->
                                            <td>1</td>
                                            <td>$2000</td>
                                            <td>無</td>
                                            <td>已完成</td>
                                        </tr>
                                        <tr>
                                            <td>A20200526</td>
                                            <td>2021/05/26</td>	
                                            <td><span>KODAK<br>Tri-X 400</span></td>
                                            <td>1</td>
                                            <td>$2000</td>
                                            <td>無</td>
                                            <td>已完成</td>
                                        </tr>
                                        <tr>
                                            <td>A20200524</td>
                                            <td>2021/05/24</td>	
                                            <td><span>KONICA<br>Genba Kantoku 28WB</span></td>
                                            <td>1</td>
                                            <td>$2000</td>
                                            <td>無</td>
                                            <td>已完成</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
			</center>
							

            <footer id="id_footer">
                <div class="foot">
                    <p>Copyright © 2021 Chung Yuan Christian University All Rights</p>
                </div>
            </footer>
        </div>
</body>
</html>